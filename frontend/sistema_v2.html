<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description"
        content="Sistema de Captura y Gesti贸n de Datos Multimodales para Lengua de Se帽as Ecuatoriana" />
    <title>Universidad de Guayaquil | Sistema de Captura LSE</title>

    <!-- Bootstrap CSS + Icons + Fuente -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />

    <!-- Tu CSS -->
    <link rel="stylesheet" href="css/style.css" />
</head>

<body class="d-flex flex-column min-vh-100">
    <!-- Toaster -->
    <div id="toastContainer" class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index:1080;"></div>

    <!-- Header -->
    <header class="header-gradient text-white shadow-lg position-relative">
        <div class="container position-relative py-4">
            <!-- Cerrar sesi贸n -->
            <div class="position-top-end">
                <button id="cerrarSesionBtn" class="btn btn-outline-light btn-sm rounded-pill px-3 shadow-sm"
                    type="button" aria-label="Cerrar sesi贸n">
                    <i class="bi bi-box-arrow-right me-1" aria-hidden="true"></i> Cerrar Sesi贸n
                </button>
            </div>

            <!-- Logo -->
            <div class="d-flex justify-content-center align-items-center gap-5 flex-wrap mt-4 mb-4">
                <img src="img/logo2.png" alt="Logo Universidad de Guayaquil" class="header-logo img-fluid"
                    loading="lazy" decoding="async" />
            </div>

            <!-- T铆tulos -->
            <div class="text-center">
                <h1 class="system-title mb-1">Universidad de Guayaquil</h1>
                <p class="system-subtitle mb-1">Sistema de Captura y Gesti贸n de Datos Multimodales</p>
                <span class="badge badge-lse mt-2" aria-label="Lengua de Se帽as Ecuatoriana">Lengua de Se帽as Ecuatoriana
                    (LSE)</span>
                <p class="project-subtitle mt-2 mb-0">Proyecto de Investigaci贸n</p>
            </div>
        </div>
    </header>

    <!-- Main -->
    <main id="contenido" class="flex-grow-1">
        <div class="container my-5">
            <!-- Descripci贸n -->
            <section class="descripcion text-center rounded-4 shadow-sm mx-auto">
                <div class="description-icon mb-3">
                    <i class="bi bi-info-circle-fill text-primary fs-2" aria-hidden="true"></i>
                </div>
                <p class="lead mb-0">
                    Plataforma acad茅mica para capturar, etiquetar y almacenar secuencias de video con puntos de
                    referencia de manos (landmarks) para la traducci贸n de la Lengua de Se帽as Ecuatoriana.
                </p>
            </section>

            <!-- Opciones -->
            <section class="seccion-opciones my-4">
                <h3 class="text-center fw-bold mb-3">Opciones principales</h3>
                <div class="d-flex flex-wrap justify-content-center gap-3 btn-container">
                    <button class="btn btn-action btn-lg btn-outline-primary rounded-pill px-4 py-2" type="button"
                        onclick="capturarSecuencia()" aria-label="Capturar secuencia">
                        <i class="bi bi-camera-fill me-2" aria-hidden="true"></i> Capturar Secuencia
                    </button>

                    <button class="btn btn-action btn-lg btn-outline-success rounded-pill px-4 py-2" type="button"
                        onclick="subirVideo()" aria-label="Subir video">
                        <i class="bi bi-upload me-2" aria-hidden="true"></i> Subir Video
                    </button>

                    <button class="btn btn-action btn-lg btn-outline-info rounded-pill px-4 py-2" type="button"
                        onclick="verHistorial()" aria-label="Ver historial">
                        <i class="bi bi-folder2-open me-2" aria-hidden="true"></i> Ver Historial
                    </button>

                </div>
            </section>

            <!-- Visor de video -->
            <section class="text-center mb-5">
                <figure class="position-relative mx-auto w-100 rounded-4 overflow-hidden"
                    style="max-width:640px; aspect-ratio:4/3;">
                    <video id="videoFrontend"
                        class="video-viewer w-100 h-100 object-fit-cover rounded-4 border border-primary shadow"
                        autoplay muted playsinline aria-label="Vista previa de c谩mara para captura de gestos">
                    </video>
                </figure>
                <div id="estadoReconocimiento" class="mt-3 fw-bold text-danger" role="status" aria-live="polite">
                    Esperando...</div>
            </section>

            <!-- Campo etiqueta + controles -->
            <section class="mb-4">
                <form class="row g-3 justify-content-center" onsubmit="event.preventDefault();">
                    <div class="col-12 col-md-10 col-lg-8">
                        <div class="input-group px-2">
                            <span class="input-group-text">
                                <i class="bi bi-chat-square-text" aria-hidden="true"></i>
                                <button type="button" id="clearInputBtn"
                                    class="btn btn-sm btn-outline-light border-0 p-0 ms-2" title="Borrar texto"
                                    aria-label="Borrar texto de la etiqueta">
                                    <i class="bi bi-trash3-fill text-white" aria-hidden="true"></i>
                                </button>
                            </span>
                            <input type="text" id="etiquetaGesto" class="form-control"
                                placeholder="Nombre del gesto a capturar" required maxlength="50" inputmode="text"
                                autocomplete="off" />
                        </div>
                    </div>
                </form>

                <!-- Botones de acci贸n -->
                <div class="video-controls mt-3 d-flex justify-content-center gap-3 flex-wrap">
                    <button id="startBtn" type="button" class="btn btn-primary btn-sm rounded-pill px-3 shadow-sm"
                        aria-label="Iniciar captura">
                        <i class="bi bi-play-fill me-1" aria-hidden="true"></i> Iniciar
                    </button>

                    <button id="stopBtn" type="button" class="btn btn-danger btn-sm rounded-pill px-3 shadow-sm"
                        aria-label="Detener captura">
                        <i class="bi bi-stop-fill me-1" aria-hidden="true"></i> Detener
                    </button>

                    <div class="btn-group shadow-sm">
                        <button id="downloadBtn" type="button"
                            class="btn btn-success btn-sm rounded-pill px-3 dropdown-toggle" data-bs-toggle="dropdown"
                            data-bs-auto-close="true" aria-expanded="false" aria-haspopup="true">
                            <i class="bi bi-download me-1" aria-hidden="true"></i> Descargar
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end shadow">
                            <li>
                                <a class="dropdown-item d-flex align-items-center" href="#" id="downloadCsvOption">
                                    <i class="bi bi-file-earmark-spreadsheet text-success me-2" aria-hidden="true"></i>
                                    CSV
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item d-flex align-items-center" href="#" id="downloadJsonOption">
                                    <i class="bi bi-file-earmark-code text-warning me-2" aria-hidden="true"></i> JSON
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-4 shadow-top mt-auto">
        <div class="container">
            <div class="mb-3">
                <span class="d-inline-block mx-2">
                    <i class="bi bi-envelope-fill me-1" aria-hidden="true"></i> soporte.aplicaciones@ug.edu.ec
                </span>
            </div>
            <div class="mb-3">
                <span class="d-block">
                    <i class="bi bi-person-fill me-1" aria-hidden="true"></i> Realizado por: <strong>Peter Avil茅s
                        Alarc贸n</strong> y <strong>Yazmin Pinela Vargas</strong>
                </span>
                <span class="d-block"><i class="bi bi-mortarboard-fill me-1" aria-hidden="true"></i> Carrera: Sistemas
                    de Informaci贸n</span>
                <span class="d-block"><i class="bi bi-building me-1" aria-hidden="true"></i> Facultad: Ingenier铆a
                    Industrial</span>
                <span class="d-block"><i class="bi bi-geo-alt-fill me-1" aria-hidden="true"></i> Ubicaci贸n: Av. Las
                    Aguas, Guayaquil 090501</span>
                <span class="d-block"><i class="bi bi-telephone-forward-fill me-1" aria-hidden="true"></i> Tel茅fono:
                    (04) 227-7309</span>
            </div>
            <p class="mb-0">漏 2025 Universidad de Guayaquil | Proyecto de Tesis</p>
        </div>
    </footer>

    <!-- Modal para Historial -->
    <div class="modal fade" id="modalHistorial" tabindex="-1" aria-labelledby="modalHistorialLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalHistorialLabel">
                        <i class="bi bi-folder2-open me-2"></i> Secuencias
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body p-0" style="min-height:70vh;">
                    <iframe id="iframeHistorial" src="" frameborder="0"
                        style="width:100%; height:100%; min-height:70vh;"></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>

    <!-- MediaPipe (solo si lo usas en frontend) -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>

    <!-- JS -->
    <script src="js/sistema.js" defer></script>
</body>

</html>